#!/usr/bin/env node
var asar = require('../lib/asar');
var program = require('commander');

program.version('v' + require('../package.json').version)
       .description('Manipulate asar archive files')

program.command('pack <dir> <output>')
       .description('create asar archive')
       .action(function(dir, output) { asar.createPackage(dir, output); });

program.command('list <archive>')
       .description('list files of asar archive')
       .action(function(archive) {
         files = asar.listPackage(archive);
         for (i in files)
           console.log(files[i]);
       });

program.command('extract <archive> <filename>')
       .description('extract one file from archive')
       .action(function(archive, filename) {
         require('fs').writeFileSync(require('path').basename(filename),
                                     asar.extractFile(archive, filename));
       });

program.parse(process.argv);

if (program.args.length == 0)
  program.help();
